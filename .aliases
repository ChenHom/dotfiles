# see https://github.com/mathiasbynens/dotfiles/blob/main/.aliases
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias ~="cd ~" # `cd` is probably faster to type though
alias -- -="cd -"
alias how="/usr/local/bin/tldr"
alias sail="./vendor/bin/sail"

alias ll='eza -l'
alias la='ll -a'
alias tree='eza --tree --level=2 --git-ignore'
alias grid='eza --long --grid'
alias l='ls -CF'

# Always enable colored `grep` output
# Note: `GREP_OPTIONS="--color=auto"` is deprecated, hence the alias usage.
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en0"
alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

# Recursively delete `.DS_Store` files
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"

# Empty the Trash on all mounted volumes and the main HDD.
# Also, clear Apple’s System Logs to improve shell startup speed.
# Finally, clear download history from quarantine. https://mths.be/bum
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl; sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* 'delete from LSQuarantineEvent'"

# Print each PATH entry on a separate line
alias path='echo -e ${PATH//:/\\n}'

alias pa="php artisan"

# git
alias gl="git log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit -- | less -R"
alias gm="git commit"
alias ga="git add ."


# ai commits
export OPENAI_KEY=

# fzf

# 查詢時忽略以下目錄
export FZF_DEFAULT_COMMAND="fd --exclude={.git,.idea,.sass-cache,vendor,node_modules,build} --type d"
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border'

alias gcob='git checkout $(git branch | fzf --cycle --border --ansi)'

fe() {
  local files
  IFS=$'\n' files=($(find . -maxdepth 5 2> /dev/null | fzf --height=20))
  [[ -n "$files" ]] && ${EDITOR:-${${1:-vim}}} "${files[@]}"
}

fd() {
  local dir
  dir=$(find ${1:-.} -maxdepth 3 \( -path './vendor' -o -path './node_modules' \) -prune \
				  -o -type d -print 2> /dev/null | fzf --height=20 +m) &&
  cd "$dir"
}


# docker 
function d-in() {
credential="$HOME/.tokens/.docker-credentials.json"

  if [ -z "$DOCKER_REGISTRY_AUTH" ]; then
    if [ ! -f "$credential" ]; then
      echo "\033[0;36m沒有登入憑證檔"
      return
    else
      export DOCKER_REGISTRY_AUTH=$(cat "$credential") docker login
    fi
  else
    docker login
  fi
}

function d-out(){
  docker logout
}


